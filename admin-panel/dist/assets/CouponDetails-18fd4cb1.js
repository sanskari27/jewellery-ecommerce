import{u as D,a as P,k as T,r as h,ai as S,aj as A,ak as w,al as F,H as I,J as O,j as e,F as y,am as i,an as x,ao as v,N as C,b as U,S as E}from"./index-c8a2b0d9.js";import{u as B,S as k}from"./index.esm-a2abf0e9.js";import{b as H}from"./index.esm-ffa98c48.js";import{c as L,d as q}from"./index.esm-c7a3e4c3.js";import{H as G}from"./chunk-7OLJDQMT-e46d341f.js";import{B as M}from"./chunk-PULVB27S-5c8c41c1.js";import{H as f}from"./chunk-3ASUQ6PA-a2d24c74.js";import{F as a}from"./chunk-56K2BSAJ-c484cfc7.js";import{F as c}from"./chunk-H46NUPBZ-dd69c2b8.js";import{I as m}from"./chunk-6CVSDS6C-2aa348d8.js";import{B as V}from"./chunk-DA7QIPTJ-0325bcd5.js";import{B as j}from"./chunk-UVUR7MCU-52014813.js";import"./iconBase-bb05031b.js";import"./chunk-ZHMYA64R-dc276fff.js";import"./index-2842c37b.js";function re(){const u=D(),s=P(),{id:l}=T(),p=async r=>{if(s(i(!0)),!await x.createCoupon(r))return s(i(!1)),alert("Error Adding Product");x.listCoupons().then(d=>s(v(d))),u(C.COUPONS),s(i(!1))},n=async r=>{if(s(i(!0)),!await x.updateCoupon(r.id,r))return s(i(!1)),alert("Error Updating Product");x.listCoupons().then(d=>s(v(d))),u(C.COUPONS),s(i(!1))};return h.useEffect(()=>()=>{s(S())},[s]),h.useEffect(()=>{s(S()),l?(s(A(!0)),s(w(l))):s(F(!0))},[s,l,u]),h.useEffect(()=>(I({title:"Coupon Details"}),()=>{O()}),[]),e.jsxs(y,{direction:"column",padding:"1rem",justifyContent:"start",children:[e.jsx(G,{color:"black",children:e.jsx(y,{width:"98%",justifyContent:"space-between",alignItems:"flex-end",children:"Product Details"})}),e.jsx(M,{marginTop:"2rem",children:e.jsx(J,{onSave:p,onUpdate:n})})]})}function J({onSave:u,onUpdate:s}){const l=D(),{couponDetails:p,uiDetails:{isCreating:n,isSaving:r}}=U(t=>t[E.COUPONS]),{register:o,handleSubmit:d,reset:g}=B({defaultValues:p});h.useEffect(()=>{g(p)},[p,g]);const N=async t=>{const b={id:t.id,name:t.name,couponCode:t.couponCode,availableCoupon:Number(t.availableCoupon),discountAmount:Number(t.discountAmount),discountPercentage:Number(t.discountPercentage),discountType:t.discountType};n?u(b):s(b)};return e.jsxs("form",{onSubmit:d(N),style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[e.jsxs(f,{justifyContent:"space-between",children:[e.jsxs(a,{width:"45%",children:[e.jsx(c,{children:"Coupon Name"}),e.jsx(m,{marginTop:"-0.25rem",type:"text",isDisabled:!n,placeholder:"Coupon Name",...o("name",{required:!0,maxLength:20})})]}),e.jsxs(a,{width:"45%",children:[e.jsx(c,{children:"Coupon Code"}),e.jsx(m,{marginTop:"-0.25rem",type:"text",isDisabled:!n,placeholder:"Coupon Code",...o("couponCode",{required:!0,maxLength:10})})]})]}),e.jsxs(f,{justifyContent:"space-between",children:[e.jsxs(a,{children:[e.jsx(c,{children:"Available Coupons"}),e.jsx(m,{marginTop:"-0.25rem",type:"text",isDisabled:!n,placeholder:"1000",...o("availableCoupon")})]}),e.jsxs(a,{children:[e.jsx(c,{children:"Discount Type"}),e.jsxs(k,{marginTop:"-0.25rem",...o("discountType"),children:[e.jsx("option",{value:"amount",children:"Amount"}),e.jsx("option",{value:"percentage",children:"Percentage"})]})]})]}),e.jsxs(f,{justifyContent:"space-between",children:[e.jsxs(a,{children:[e.jsx(c,{children:"Discount Amount"}),e.jsx(m,{marginTop:"-0.25rem",type:"text",placeholder:"1000",...o("discountAmount")})]}),e.jsxs(a,{children:[e.jsx(c,{children:"Discount Percentage"}),e.jsx(m,{marginTop:"-0.25rem",type:"text",placeholder:"0 - 100",...o("discountPercentage")})]})]}),e.jsxs(V,{alignSelf:"end",children:[e.jsx(j,{variant:"outline",colorScheme:"red",leftIcon:e.jsx(L,{}),onClick:()=>l(C.COUPONS),children:"Discard"}),n?e.jsx(j,{variant:"outline",colorScheme:"green",leftIcon:e.jsx(H,{}),isLoading:r,type:"submit",children:"Add Coupon"}):e.jsx(j,{variant:"outline",colorScheme:"green",leftIcon:e.jsx(q,{}),isLoading:r,type:"submit",children:"Update"})]})]})}export{re as default};
